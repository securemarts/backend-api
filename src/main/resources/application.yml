spring:
  application:
    name: securemarts-platform

  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/securemarts}
    username: ${DB_USERNAME:securemarts}
    password: ${DB_PASSWORD:securemarts}
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false
    properties:
      hibernate:
        default_schema: public
        format_sql: true
        jdbc:
          batch_size: 25
    open-in-view: false

  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
    # Fix checksum mismatch (e.g. V12 changed after apply): repair then migrate. Set false after first successful start if preferred.
    repair-on-migrate: true

  cache:
    type: caffeine
  data:
    redis:
      host: localhost
      port: 6379
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 50MB

server:
  servlet:
    context-path: /api/v1

# JWT
app:
  uploads:
    path: ${UPLOADS_PATH:./uploads}
  mail:
    from: ${APP_MAIL_FROM:noreply@securemarts.local}
    from-name: ${APP_MAIL_FROM_NAME:Securemarts}
    zeptomail:
      api-key: ${APP_MAIL_ZEPTO_API_KEY:}
  jwt:
    access-secret: ${JWT_ACCESS_SECRET:your-256-bit-secret-for-access-token-min-32-chars}
    refresh-secret: ${JWT_REFRESH_SECRET:your-256-bit-secret-for-refresh-token-min-32-chars}
    access-ttl: 900
    refresh-ttl: 604800
    issuer: securemarts-platform
  google:
    # OAuth2 client ID for Google Sign-In; used to validate id_token aud. If empty, aud is not checked.
    client-id: ${APP_GOOGLE_CLIENT_ID:}
    # API key for Places API (autocomplete, place details). Required for /places/* endpoints.
    places-api-key: ${APP_GOOGLE_PLACES_API_KEY:}
  auth:
    max-login-attempts: 5
    lockout-duration-minutes: 30
    rate-limit-login-per-minute: 10
    password-reset-base-url: ${APP_PASSWORD_RESET_BASE_URL:}
  default-currency: NGN
  payment:
    paystack:
      secret-key: ${APP_PAYMENT_PAYSTACK_SECRET_KEY:sk_test_1e3906ff831ba4469a090d193000c9fcc5dc02d3}
      public-key: ${APP_PAYMENT_PAYSTACK_PUBLIC_KEY:pk_test_32b80826f25b92fa82e66a6389fef92bf626cc95}
    flutterwave:
      secret-key: ${APP_PAYMENT_FLUTTERWAVE_SECRET_KEY:}
  subscription:
    paystack:
      # Amount in kobo for first-time subscription (when plan has no Paystack plan code or customer has no auth)
      pro-monthly-amount-kobo: ${APP_SUBSCRIPTION_PRO_MONTHLY_KOBO:2000000}
      pro-annual-amount-kobo: ${APP_SUBSCRIPTION_PRO_ANNUAL_KOBO:20000000}
      enterprise-monthly-amount-kobo: ${APP_SUBSCRIPTION_ENTERPRISE_MONTHLY_KOBO:5000000}
      enterprise-annual-amount-kobo: ${APP_SUBSCRIPTION_ENTERPRISE_ANNUAL_KOBO:50000000}

springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    operationsSorter: method

logging:
  level:
    com.securemarts: DEBUG
    org.springframework.security: DEBUG
    org.hibernate.SQL: DEBUG
